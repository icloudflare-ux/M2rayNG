{ "dns": { "final": "remote", "rules": [ { "domain_suffix": [ ".ir" ], "server": "local" }, { "rule_set": [ "geosite-category-ir" ], "server": "local" }, { "rule_set": [ "geosite-category-ads-all" ], "server": "block" } ], "servers": [ { "address": "udp://1.0.0.3", "detour": "proxy", "strategy": "ipv4_only", "tag": "backup" }, { "address": "udp://1.1.1.3", "detour": "warp ir", "strategy": "ipv4_only", "tag": "remote" }, { "address": "local", "detour": "direct", "strategy": "ipv4_only", "tag": "local" }, { "address": "rcode://success", "tag": "block" } ] }, "experimental": { "cache_file": { "enabled": true }, "clash_api": { "external_controller": "127.0.0.1:10814" } }, "inbounds": [ { "domain_strategy": "prefer_ipv4", "listen": "127.0.0.1", "listen_port": 10808, "sniff": true, "sniff_override_destination": true, "tag": "socks", "type": "socks" }, { "domain_strategy": "prefer_ipv4", "listen": "127.0.0.1", "listen_port": 10809, "sniff": true, "sniff_override_destination": true, "tag": "http", "type": "http" } ], "log": { "level": "info", "timestamp": true }, "outbounds": [ { "detour": "warp ir", "local_address": [ "172.16.0.2/32", "2606:4700:110:8647:5ccc:a119:8fa3:8a2f/128" ], "mtu": 1280, "peer_public_key": "bmXOC\u002BF1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=", "private_key": "mCWbrMd/ejQ\u002BwPhbOURIX8xIPblzuGXMpaSORmlqb3k=", "reserved": [ 165, 48, 74 ], "server": "188.114.97.170", "server_port": 2371, "tag": "proxy", "type": "wireguard" }, { "local_address": [ "172.16.0.2/32" ], "mtu": 1280, "peers": [ { "allowed_ips": [ "0.0.0.0/0" ], "public_key": "bmXOC\u002BF1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=", "reserved": [ 178, 167, 30 ], "server": "warp_auto", "server_port": 0 } ], "private_key": "4CWNo9/LVaS54olCKSWtlmjSExtNNb2D4bBbVlbUKWE=", "tag": "warp ir", "type": "wireguard" }, { "tag": "direct", "type": "direct" }, { "tag": "block", "type": "block" }, { "tag": "dns_out", "type": "dns" } ], "route": { "rule_set": [ { "download_detour": "proxy", "format": "binary", "tag": "geosite-private", "type": "remote", "url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-private.srs" }, { "download_detour": "proxy", "format": "binary", "tag": "geosite-category-ads-all", "type": "remote", "url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ads-all.srs" }, { "download_detour": "proxy", "format": "binary", "tag": "geosite-category-ir", "type": "remote", "url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ir.srs" }, { "download_detour": "proxy", "format": "binary", "tag": "geoip-ir", "type": "remote", "url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ir.srs" } ], "rules": [ { "outbound": "dns_out", "protocol": [ "dns" ] }, { "ip_cidr": [ "10.10.34.34", "10.10.34.35", "10.10.34.36" ], "outbound": "block" }, { "outbound": "direct", "rule_set": [ "geosite-private" ] }, { "ip_is_private": true, "outbound": "direct" }, { "outbound": "block", "rule_set": [ "geosite-category-ads-all" ] }, { "outbound": "direct", "domain_suffix": [ ".ir" ], "rule_set": [ "geosite-category-ir" ] }, { "outbound": "direct", "rule_set": [ "geoip-ir" ] }, { "outbound": "proxy", "port_range": [ "0:65535" ] } ] } }
